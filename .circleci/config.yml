---
version: 2
jobs:
  build:
    docker:
      - image: debian:stretch
    filters:
      branches:
        only:
          - test
    steps:
      - checkout
      - run: echo Hello, world.
      - run: date
      - run: "sleep 30"
      - run: mkdir /code/
      - run: cp artifact /code/artifact
      - store_artifacts:
          path: /code/artifact

  deploy_only:
    docker:
      - image: debian:stretch
    steps:
      - run:
          name: echo Deploying only.
  say_hi:
    docker:
      - image: debian:stretch
    steps:
      - run: echo HI

workflows:
  version: 2
  no_artifacts:
    jobs:
      - build
      - say_hi
